<!DOCTYPE html>
<html>
<head>

    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Símaskrá</title>
    <script type="text/javascript" src="cordova.js"></script>
    <link rel="stylesheet" href="css/custom.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="js/functions_before.js"></script><!-- load javascript that needs to be loaded BEFORE jquery mobile loads -->
    <script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
    <script type="text/javascript" src="js/jquery.blockUI.js"></script><!-- for speeding op tap events -->
    <script type="text/javascript" src="js/gps.js"></script><!-- gettin gps cord -->
    <script type="text/javascript" src="js/update.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="js/create_firstpage.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="js/create_divisons.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="js/create_onedivison.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="js/create_workplace.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="js/create_information.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="js/create_offers.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="js/create_map.js"></script><!-- Get data from server-->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="js/jquery.ui.map.js"></script>
    <script type="text/javascript">

        //Athuga hvort localstorage se til, ef ekki bua til
        if(!localStorage.timestamp)
        {
            localStorage.timestamp = '0';
        }


        //Save what offer was just clicked
        $(document).on('click','a.flokkur', function() {
            sessionStorage.flokkur = $(this).attr("id");
           // sessionStorage.haus = $(this).attr();
        });
        $(document).on('click','a.division', function() {
            sessionStorage.division = $(this).attr("id");
        });


        $(document).on( 'pageinit ','#featured', function(event)
        {
            //Disable active state on buttons, removes the blue theme when button is pressed.
            $(document).on('tap', function(e){
                $('.activeOnce').removeClass($.mobile.activeBtnClass);
            });

            console.log("Athuga hvort eigi að uppfæra gögn");
            if(sessionStorage.load == "1")
            {
                create_firstpage();
            }
            else
            {
                //loadViewViaAjax('Index.html', afterAjax);
                console.log("Uppfærir gögn");
                //Athuga hvort eigi að sækja gögn
                Update_Check();
                sessionStorage.setItem("load",1);
            }




        });

        function onDeviceReady() {
            //alert("we are an app");
            console.log("deviceready triggeraðist");
            $.mobile.allowCrossDomainPages = true;
            $.support.cors = true;

            //var options = new ContactFindOptions();
            //var fields = ["displayName", "name"];
            //navigator.contacts.find(fields, onSuccess, onError, options);

        }

        function onSuccess(contacts) {
            sessionStorage.setItem("contacts",contacts);
            alert("Display Name = " + contacts[0].displayName );

        }


        function onError(contactError) {
            alert('onError!');
        }



        document.addEventListener("backbutton", function() {
            if ( $('.ui-page-active').attr('id') == 'featured') {
                exitAppPopup();
            } else {
                history.back();
            }
        }, false);

        function exitAppPopup() {
            navigator.notification.confirm(
                    'Loka símaskranni?'
                    , function(button) {
                        if (button == 2) {
                            navigator.app.exitApp();
                        }
                    }
                    , 'Hætta'
                    , 'Nei,Já'
            );
            return false;
        }


        function onBodyLoad() {

            document.addEventListener("deviceready", onDeviceReady, false);
        }

        function save_contact()
        {
            // create a new contact object
            var contact = navigator.contacts.create();
            contact.displayName = "Plumber";
            contact.nickname = "Plumber";            // specify both to support all devices

            // populate some fields
            var name = new ContactName();
            name.givenName = "Jane";
            name.familyName = "Doe";
            contact.name = name;

            // save to device
            contact.save(onSuccess,onError);
        }

        function onSaveSuccess(contact) {
            alert("Save Success");
        }

        // onSaveError: Failed to get the contacts
        //
        function onSaveError(contactError) {
            alert("Error = " + contactError.code);
        }



    </script>




</head>
<body onload="onBodyLoad()">
<!--Begin page 1 , Page for names in alphabet order-->
<div data-role="page" data-theme="a"  id="featured" >
    <img id="displayBox" src="Images/loading.gif" width="400" height="400" style="display:none" />
    <div data-role="header" data-theme="a" data-position="fixed" >
        <h1>Símaskra</h1>
        <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
    </div><!-- /header -->
    <div  data-role="content"   id="alphabet_list">

    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a class="footertab" href="#featured" data-transition="none"  id="1">Stafrófsröð</a></li>
                    <li><a class="footertab" href="#divisions" data-transition="none" id="2">Deild</a></li>
                    <li><a class="footertab" href="#workplace" data-transition="none" id="3">Starfsstöð</a></li>
                </ul>
            </div>
    </div><!-- /footer -->
</div><!-- /Page 1-->

<!-- Page 2, Page for names grouped by divisons-->
<div data-role="page" data-theme="a" class="jqm-demos ui-responsive-panel" id="divisions" data-url="panel-fixed-page1">
    <div data-role="header" data-theme="a" data-position="fixed" >
        <h1>Deildir</h1>
        <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
    </div><!-- /header -->
    <div  data-role="content" id="divisions_list">

    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a class="footertab" href="#featured" data-transition="none"  id="1">Stafrófsröð</a></li>
                <li><a class="footertab" href="#divisions" data-transition="none" id="2">Deild</a></li>
                <li><a class="footertab" href="#workplace" data-transition="none" id="3">Starfsstöð</a></li>
            </ul>
        </div>
    </div><!-- /footer -->
</div><!-- /Page 2-->

<!-- Page 3, Page for names grouped by divisons-->
<div data-role="page" data-theme="a" class="jqm-demos ui-responsive-panel" id="onedivision" data-url="panel-fixed-page1">
    <div data-role="header" data-theme="a" data-position="fixed" >
        <h1></h1>
        <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
    </div><!-- /header -->
    <div  data-role="content" id="onedivision_list">

    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a class="footertab" href="#featured" data-transition="none"  id="1">Stafrófsröð</a></li>
                <li><a class="footertab" href="#divisions" data-transition="none" id="2">Deild</a></li>
                <li><a class="footertab" href="#workplace" data-transition="none" id="3">Starfsstöð</a></li>
            </ul>
        </div>
    </div><!-- /footer -->
</div><!-- /Page 3-->

<!-- Page 4, Page for names grouped by workplace-->
<div data-role="page" data-theme="a" class="jqm-demos ui-responsive-panel" id="workplace" data-url="panel-fixed-page1">
    <div data-role="header" data-theme="a" data-position="fixed" >
        <h1>Starfsstöð</h1>
        <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
    </div><!-- /header -->
    <div  data-role="content"  id="workplaces_list">

    </div>
    <div data-role="footer" data-id="foo1" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a class="footertab" href="#featured" data-transition="none"  id="1">Stafrófsröð</a></li>
                <li><a class="footertab" href="#divisions" data-transition="none" id="2">Deild</a></li>
                <li><a class="footertab" href="#workplace" data-transition="none" id="3">Starfsstöð</a></li>
            </ul>
        </div>
    </div><!-- /footer -->
</div><!-- /Page 4-->

<!-- Page 5, Displays information on a employee-->
<div data-role="page" data-theme="a" class="jqm-demos ui-responsive-panel" id="information" data-url="panel-fixed-page1">
    <div data-role="header" data-theme="a" data-position="fixed" >
        <h1></h1>
        <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
    </div><!-- /header -->
    <div data-role="content" id="information_list">

    </div>

</div><!-- /Page 5-->



</body>
</html>